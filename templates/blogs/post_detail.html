{% extends 'blogbase.html' %}
{% load static %}
{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
<link href="{% static "blogs/css/blog-detail.css" %}" rel="stylesheet" type="text/css"/>

<style class="">

</style>

<header class="masthead behind" style="background-image: url({{post.img.url}});">
  <div class="overlay"></div>
  <div class="container ">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <div class="post-heading">
<!--          <h1 class="body-font blog-header">{{post.title}}</h1>-->
<!--          <span class="body-font blog-meta-data">-->
<!--            Published on {{post.timestamp}}</span>-->
          <br>
          <span class="body-font blog-meta-data">
<!--            Posted by {{ post.user.username }}-->
          </span>
        </div>
      </div>
    </div>
  </div>
</header>
<!--New Header-->

<!--New Post Content-->


<!-- Post Content -->
<article class="blog-card-margin">
  <div class="container-fluid shadow-lg p-3 mb-5 bg-white rounded">
    <div class="row text-center">
      <h1 class="body-font blog-header">
        {{post.title}}
      </h1>
    </div>

    <div class="row">
      <img src="/media/blog/user.svg" alt="" class="me-2" height="60">
    </div>
    <div class="row text-center  mt-3">
      <span class=""><p class="text-muted blog-meta-data body-font">By {{ post.user.username }}, Published on: {{post.timestamp}}</p></span>
    </div>
    <div class="container text-center">
<!--      change the below to buttons-->
      <span class="me-1 ms-1"><i class="fa fa-heart text-danger"></i></span>
          <span class="me-1 ms-1"><i class="fa fa-share-alt-square text-secondary"></i></span>
          <span class="me-1 ms-1"><i class="fa fa-bookmark text-warning"></i></span>
          <span class="badge badge-pill badge-dark">2 Min read</span>
    </div>
    <div class="container pr-5 pl-5">
      <hr>
    </div>
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <p class="body-font">
          {{post.content|safe}}
        </p>
      </div>
    </div>
  </div>
        <hr>
  {% if user.is_authenticated %}
  <div class="container shadow-lg p-3 mb-5 bg-white rounded">
       <!-- Like Button -->
        <div class="like-button" id="like_section">
          <p>
            <b>Enjoyed the Article? Please leave a like :)</b>
            <a href="{% url 'blogs:like' post.id %}" title="Love it" class="btn btn-counter" data-count={{ post.total_likes }}><span>&#x2764;</span>
              Loved it</a>
          </p>
        </div>
        <!-- Like Button Ends-->



        <!-- Leave Comment Section -->
        <div class="col-sm-12">


          <p><b>Leave Your Comment</b></p>
          <form method="post">
            {% csrf_token %}
            <textarea name="comment" class="form-control" cols="50" rows="5" wrap="hard"></textarea>
            <!-- {{ form.comment }} -->
            <p></p>
            
            {% if error_message %}
            <div class="alert alert-warning" role="alert">
              {{ error_message }}
            </div>
            
            {% endif %}
              
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
        <!-- Leave Comment Section Ends-->
        {% else %}
        <p>Please <a href="{% url 'accounts:login' %}">Login</a> to like or comment on the above mentioned post</p>
        {% endif %}
        <hr />
        <!-- Comment Section -->
        <div class="container body-font comments">
          <p class="body-font blog-meta-data">Popular Comments</p>
          {% for comment in post.postcomment_set.all %}
            <!-- <img src="..." class="mr-3" alt="..." /> -->
            <!-- <var class="mr-3">{{ forloop.counter }} .</var> -->
            <div class="mt-3">
              <div class="row">
                <span class=" ">
                  <img src="/media/blog/user.svg" alt="" class="me-2" height="30">
                  <b class="">{{ comment.user.username }}</b>
                </span>
              </div>
              <p style="comments">
                {{ comment.comment }}
              </p>
            </div>
<hr>
          {% endfor %}
        </div>
    </div>
      </div>
    </div>
  </div>
</article>
<hr />
{% endblock %}