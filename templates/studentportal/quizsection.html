{% extends 'webbase.html' %}
{% load static %}
{% block content %}
<style>
  .numberCircle {
    border-radius: 50%;
    width: 36px;
    height: 36px;
    padding: 8px;

    background: #fff;
    border: 2px solid #666;
    color: #666;
    text-align: center;

    font: 32px Arial, sans-serif;
  }
</style>

<div class="wrapper" style="margin-top: 2rem;">
  <div class="container demo" style="margin-top: 2rem !important;">
    <div class="col-lg-12 justify-content-center">
      <div class="row">
        <div class="col-md-12">
          <span class="anchor" id="formComplex"></span>
          <!-- form complex example -->
          {% include 'messages.html' %}
          <div class="card card-outline-secondary" style="margin-bottom: 2rem !important">
            <!-- <div class="card-header">
                <h3 class="mb-0">Complex Form Example</h3>
              </div> -->
            <h2 class="w-100 m-3">Quiz</h2>
              <div class="text-center text-uppercase text-danger" style="font-size: large;">
                The quiz will automatically submit in: <span class='text-info' id="demo"></span>
              </div>
            <div class="card-body">
              <form action={% url 'studentportal:submitquestion' question.number %} method="POST">
                {% csrf_token %}

                <div class="mt-4">
                  <div class="row">
                    <div class="col-sm-9 pb-3">
                      <p><b>{{ question.number }}. {{ question.label }}</b></p>

                      {% for choice in form.choice %}
                      <div class="form-check">
                        {{ choice }}
                        {{ choice.label }}
                      </div>
                      <div class="form-check-label">
                      </div>
                      {% endfor %}

                    </div>
                    <div class="col-sm-3 pb-3 text-right " style="overflow-y: scroll; height: 300px;">

                      {% for q in question_set %}

                      {% if question.number == q.number %}

                      <button type="button" class="btn btn-counter btn-info m-3 w-75">Question
                        {{ q.number }}</button>
                      {% else %}
                      <a href={% url 'studentportal:quiz' q.number %} style="background-color: inherit !important;">
                        <button type="button" class="btn btn-counter btn-outline-info m-3 w-75">Question
                          {{ q.number }}</button>
                      </a>
                      {% endif %}


                      {% endfor %}
                    </div>
                  </div>
                  <div class="col-sm-12 mt-4">
                    <input class="form-control" id="" type="submit"
                      style="background-color: #0a8f89;color: white;" value="Submit Answer and go to next Question" />
                  </div>
                </div>
              </form>
              <div class="row text-center justify-content-center">
                  <form method="POST" action={% url 'studentportal:submitquiz' %}>
                    
                    {% csrf_token %}
                      <input class="btn btn-danger" id="submitQuiz" type="submit" value="Submit Quiz" />
                  </form>
              </div>
            </div>
          </div>
          <!--/card-->
        </div>
        <div class="col-md-4" id="illustration">
          <img src="./images/illust.jpeg" alt="" />
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Set the end date
  var countDownDate = new Date("{{ deadline }} UTC").getTime();
  // Update the count down every 1 second
  var x = setInterval(function () {
    // Get today's date and time
    var now = new Date().getTime();

    // Find the end_date between now and the count down date
    var end_date = countDownDate - now;

    // Time calculations for days, hours, minutes and seconds
    var days = Math.floor(end_date / (1000 * 60 * 60 * 24));
    var hours = Math.floor(
      (end_date % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
    );
    var minutes = Math.floor((end_date % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((end_date % (1000 * 60)) / 1000);

    // Output the result in an element with id="demo"
    document.getElementById("demo").innerHTML =
      days + "d " + hours + "h " + minutes + "m " + seconds + "s ";

    // If the count down is over, page gets redirected
    if (end_date < 0) {
      clearInterval(x);
      document.getElementById("submitQuiz").click()
    }
  }, 1000);
</script>
<!-- Footer -->
{% endblock content %}